# day 10
## 进程和线程之间有什么区别
<details>

进程和线程的定义区别：
在操作系统里面，进程就是一个正在执行的程序. 当我们在电脑上打开很多程序的时候，操作系统就会同时创建了许多的进程。可以理解为是资源分配的最小单位，因为操作系统会给每一个进程分配独立的内存空间，配置输入输出流等等运行这个程序需要的所有资源。所以在进程实际是一种数据结构，记录内存地址，CPU寄存器值，虚拟地址，进程的状态等等，这个数据结构就是PCB进程控制快。与之对比的是线程。这里在一个包含的关系，进程之下可以运行一条或者多条线程。可以想一下一份代码从上到下的运行到结尾。
下一行等着上一行运行结束再执行，这是一条线程。另一种就是多线程。统一分代码不同的方法他们俩就分开运行，各自不依赖对方，这也能提高效率。

效率区别：
和进程的区别就是。计算机不会为线程分配那么多资源。如果一个进程中有很多线程在运行，这些线程会共享一个进程的虚拟内存。这包括代码、文件、全局变量，文件的管理等，但他们也有一部分独立的东西。比如寄存器， 栈。所以计算机在创建线程时比进程简单，因为它不需要开辟新空间，很多资源各个线程之间共享，同理在销毁，创建的时候县城需要创建和释放的资源就比进程要少。所以线程比进程更有效率。但是相对来说，安全性没有那么高。进程的失败不会影响别的进程但是线程就会。

上下文切换区别：
我们需要进程和县城的目的都是想并发的执行程序。为了提高CPU的利用效率，让CPU执行这个程序一段时间，然后执行别的程序一段时间再来执行这个，而不是卡死在一个程序当中. 这个切换的过程需要频繁上下文切换. 进程和现成的上下文切换也有不同的特性。晋城之下的上下文切换。计算机需要替换的东西就比线程要多，除了CPU的寄存器和程序技术，这是进程和县城都有的，进程还需要替换比如页表，文件。因为每个进程独有的一份不一样的。上下切换的时候这些资源都需要替换。但是在线程里只需要替换不共享的部分。

通信区别：
再说一下关于进程间通信和线程之间的通信。
进程间的通信比较麻烦，一般需要借助内核空间，因为内核是管理进程的更上一个层级系统。一种方式就是在内核中的管道沟通就是grep。一个进程可以向管道的一端发送消息，另外一个进程从另外一段收到消息，还有一种方式是消息对立，因为管道是没有格式化的自节流管道命令，对于这一点是一个提升用户可以发送自定义的数据结构，这个时候就需要发送者和接收，提前商定好这个内容格式，还有一种通信方式就是通过内核的存储空间进程共同访问存储空间通过里面读写数据来实现交流。这里举例三种方式县城之间的沟通交流就来得简单很多，因为本来他们就会共享内存，所以可以通过使用全局变量互通

并发操作要注意的问题：
不管是多个线程还是多个进程，在访问同一个资源的时候都需要特殊处理，防止竞争条件和考虑并发一致性的问题。我举几个处理的例子一个就是信号量在C语言里面是semaphore，他的概念是一个全局的计数器能，控制访问有多少进程或者线程正在访问这个资源，还提供这两个系统原子性操作P和V保证并发的安全。


Process is OS's abstraction of a running program. When we run multiple program at the same time, multiple processes
are run concurrently on the same system. Instructions of one process are interleaved with instructions of another process.
This is achieved by mehcanism known as context switching. A uniprocessor system only execute one program code at a time, while multicore can execute
several programs simultaneously. Processes abstracts over processor, main memory, IO devices.

Threads: a rpcess can consist of multiple threads, each running in the contect of the process, share same code and global data. 
Easier to share data between threads and more efficient. Multiple control flow within a process.

concurrency: a system with multiple, simultaneous activities. interleaving execution.

parallelism: use of concurrency to make system run faster. multiple processes running different cores.
- thread level paralellism

  Multicore processors: have several cpus or cors.

  hyperthreading: allows a single cpu to execute multiple threads/ flows of control.

instruciton level parallelism
  - processors execute multiple instructions at one time

</details>
